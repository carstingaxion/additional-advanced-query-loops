var gpql;(()=>{"use strict";var e={20:(e,t,r)=>{var a=r(609),s=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,r){var a,i={},p=null,c=null;for(a in void 0!==r&&(p=""+r),void 0!==t.key&&(p=""+t.key),void 0!==t.ref&&(c=t.ref),t)n.call(t,a)&&!l.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===i[a]&&(i[a]=t[a]);return{$$typeof:s,type:e,key:p,ref:c,props:i,_owner:o.current}}},848:(e,t,r)=>{e.exports=r(20)},609:e=>{e.exports=window.React}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(()=>{r.r(a),r.d(a,{GPQL:()=>D,GPQLControls:()=>d,GPQLControlsInheritedQuery:()=>f});const e=window.wp.blocks,t=window.wp.i18n,s=window.wp.primitives;var n=r(848);const o=(0,n.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(s.Path,{d:"M16 10.5v3h3v-3h-3zm-5 3h3v-3h-3v3zM7 9l-3 3 3 3 1-1-2-2 2-2-1-1z"})}),l=(0,n.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(s.Path,{d:"M5 13.5h3v-3H5v3zm5 0h3v-3h-3v3zM17 9l-1 1 2 2-2 2 1 1 3-3-3-3z"})});var i=r(609);const p=window.wp.components,c=function(e){const r="string"==typeof e?20:24,a=(0,t.sprintf)("-$%dpx",r/4);return(0,i.createElement)(p.__experimentalZStack,{offset:15,isLayered:!0},(0,i.createElement)((()=>(0,i.createElement)(p.Icon,{icon:e})),null),(0,i.createElement)("div",{style:{color:"var(--wp-components-color-accent,var(--wp-admin-theme-color,#3858e9))",marginTop:a,marginRight:a}},(0,i.createElement)((()=>(0,i.createElement)(p.Icon,{icon:"nametag",size:12})),null)))};(0,e.registerBlockVariation)("core/query-pagination-previous",{category:"gatherpress",keywords:[(0,t.__)("Page numbers","default"),(0,t.__)("Pagination","default")],icon:c(o),isActive:["className"],attributes:{className:"gatherpress-query-pagination-previous",label:(0,t.__)("Previous Events","gatherpress")},name:"gatherpress-query-pagination-previous",title:(0,t.__)("Previous Events","gatherpress"),description:(0,t.__)("Displays the previous events link.","gatherpress")}),(0,e.registerBlockVariation)("core/query-pagination-next",{category:"gatherpress",keywords:[(0,t.__)("Page numbers","default"),(0,t.__)("Pagination","default")],icon:c(l),isActive:["className"],attributes:{className:"gatherpress-query-pagination-next",label:(0,t.__)("Next Events","gatherpress")},name:"gatherpress-query-pagination-next",title:(0,t.__)("Next Events","gatherpress"),description:(0,t.__)("Displays the next events link.","gatherpress")});const u=window.wp.hooks,g=window.wp.blockEditor,{Fill:h,Slot:_}=(0,p.createSlotFill)("GPQLControls"),m=({children:e})=>(0,i.createElement)(h,null,e);m.Slot=({fillProps:e})=>(0,i.createElement)(_,{fillProps:e},(e=>e.length?e:null));const d=m,{Fill:v,Slot:y}=(0,p.createSlotFill)("GPQLControlsInheritedQuery"),E=({children:e})=>(0,i.createElement)(v,null,e);E.Slot=y;const f=E,q=({attributes:e,setAttributes:r})=>{const{query:{perPage:a,offset:s=0}={}}=e;return(0,i.createElement)(p.RangeControl,{label:(0,t.__)("Events Per Page","gatherpress"),min:1,max:50,onChange:t=>{r({query:{...e.query,perPage:t,offset:s}})},value:a})},b=window.wp.data,w=({attributes:e,setAttributes:r})=>{const{query:{exclude_current:a}={}}=e,s=(0,b.useSelect)((e=>e("core/editor").getCurrentPost()),[]);return s?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(p.ToggleControl,{label:(0,t.__)("Exclude Current Event","gatherpress"),checked:!!a,onChange:t=>{r({query:{...e.query,exclude_current:t?s.id:0}})}})):(0,i.createElement)("div",null,(0,t.__)("Loading…","gatherpress"))},P=({attributes:e,setAttributes:r})=>{const{query:{gatherpress_events_query:a="upcoming"}={}}=e;return(0,b.useSelect)((e=>e("core/editor").getCurrentPost()),[])?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(p.ToggleControl,{label:(0,t.__)("Upcoming or past events.","gatherpress"),help:(0,t.sprintf)(/* translators: %s: 'upcoming' or 'past' */ /* translators: %s: 'upcoming' or 'past' */
(0,t._x)("Currently shows %s events.","'upcoming' or 'past'","gatherpress"),a),checked:"past"===a,onChange:t=>{r({query:{...e.query,gatherpress_events_query:t?"past":"upcoming"}})}})):(0,i.createElement)("div",null,(0,t.__)("Loading…","gatherpress"))},x=({attributes:e,setAttributes:r})=>{const{query:{offset:a=0}={}}=e;return(0,i.createElement)(p.RangeControl,{label:(0,t.__)("Event Offset","gatherpress"),min:0,max:50,value:a,onChange:t=>{r({query:{...e.query,offset:t}})}})},k=({attributes:e,setAttributes:r})=>{const{query:{order:a,orderBy:s}={}}=e,n="asc"===a?(0,t.__)("Ascending Order","gatherpress"):(0,t.__)("Descending Order","gatherpress");return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(p.SelectControl,{label:(0,t.__)("Order Events By","gatherpress"),value:s,help:"meta_value"===s||"meta_value_num"===s?(0,t.__)("Meta Value and Meta Value Num require that Meta Key is set in the Meta Query section.","gatherpress"):"",options:[{label:(0,t.__)("Event Date","gatherpress"),value:"datetime"},{label:(0,t.__)("Last Modified Date","gatherpress"),value:"modified"},{label:(0,t.__)("Title","gatherpress"),value:"title"},{label:(0,t.__)("Random","gatherpress"),value:"rand"},{label:(0,t.__)("Post ID","gatherpress"),value:"id"}],onChange:t=>{r({query:{...e.query,orderBy:t}})}}),(0,i.createElement)(p.ToggleControl,{label:n,checked:"asc"===a,onChange:()=>{r({query:{...e.query,order:"asc"===a?"desc":"asc"}})}}))};(0,u.addFilter)("editor.BlockEdit","core/query",(e=>r=>{if(!(e=>{const{attributes:{namespace:t}}=e;return t&&t===D})(r))return(0,i.createElement)(e,{...r});const a=function(e=null){return"gatherpress_event"===(e||(0,b.select)("core/editor").getCurrentPostType())}(),{attributes:s}=r;return!1===s.query.inherit?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(e,{...r}),(0,i.createElement)(g.InspectorControls,null,(0,i.createElement)(p.PanelBody,{title:(0,t.__)("Event Query Settings","gatherpress")},(0,i.createElement)(P,{...r}),a&&(0,i.createElement)(w,{...r}),(0,i.createElement)(q,{...r}),(0,i.createElement)(x,{...r}),(0,i.createElement)(k,{...r}),(0,i.createElement)(d.Slot,{fillProps:{...r}})))):(0,i.createElement)(i.Fragment,null,(0,i.createElement)(e,{...r}),(0,i.createElement)(g.InspectorControls,null,(0,i.createElement)(p.PanelBody,{title:(0,t.__)("GatherPress Query Settings","gatherpress")},(0,i.createElement)(k,{...r}),(0,i.createElement)(f.Slot,{fillProps:{...r}}))))}));const C={name:"core/group",attributes:{className:"gp-venue-v3",layout:{type:"flex",orientation:"nonsense"}},innerBlocks:[["core/pattern",{slug:"gatherpress/venue-details"}]]},S=["core/query-no-results",{},[["core/paragraph",{placeholder:(0,t.__)("Add text or blocks that will display when a query returns no events.")}]]],B=["core/query-pagination",{},[["core/query-pagination-previous",{label:(0,t.__)("Previous Events","gatherpress"),className:"gatherpress-query-pagination-previous"}],["core/query-pagination-numbers"],["core/query-pagination-next",{label:(0,t.__)("Next Events","gatherpress"),className:"gatherpress-query-pagination-next"}]]],D="gatherpress-query-loop",O={namespace:D,query:{perPage:3,pages:0,offset:0,postType:"gatherpress_event",gatherpress_events_query:"upcoming",order:"asc",orderBy:"datetime",inherit:!1}},N={category:"gatherpress",keywords:[(0,t.__)("Events","gatherpress"),(0,t.__)("Dates","gatherpress")],icon:c("list-view"),isActive:["namespace","scope"],attributes:{...O},allowedControls:["inherit","taxQuery"],scope:["block"]};(0,e.registerBlockVariation)("core/query",{...N,name:D,title:(0,t.__)("Event Query","gatherpress"),description:(0,t.__)("Create event queries","gatherpress"),scope:["inserter","transform"],example:{attributes:{...O},innerBlocks:[{name:"core/post-template",attributes:{},innerBlocks:[{name:"gatherpress/event-date"},{name:"core/post-title"},{...C}]}]}}),(0,e.registerBlockVariation)("core/query",{...N,name:"gatherpress-query-loop-map-date",title:(0,t.__)("Map & Event-Date","gatherpress"),description:(0,t.__)("Create gatherpress queries with Map & Date","gatherpress"),innerBlocks:[["core/post-template",{},[["gatherpress/venue"],["gatherpress/event-date"]]],B,S]}),(0,e.registerBlockVariation)("core/query",{...N,name:"gatherpress-query-loop-date-title",title:(0,t.__)("Event-Date, Title & Venue details","gatherpress"),description:(0,t.__)("Create gatherpress queries with Event-Date & Title","gatherpress"),innerBlocks:[["core/post-template",{},[{name:"gatherpress/event-date"},{name:"core/post-title"},{...C}]],B,S]}),(0,e.registerBlockVariation)("core/query",{...N,name:"gatherpress-query-loop-date-address",title:(0,t.__)("Event-Date & Venue Details","gatherpress"),description:(0,t.__)("Create gatherpress queries with Event-Date & Venue Details","gatherpress"),innerBlocks:[["core/post-template",{},[{name:"gatherpress/event-date"},{...C}]],B,S]})})(),gpql=a})();