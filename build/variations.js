var gpql;(()=>{"use strict";var e={20:(e,t,r)=>{var s=r(609),a=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,r){var s,i={},p=null,u=null;for(s in void 0!==r&&(p=""+r),void 0!==t.key&&(p=""+t.key),void 0!==t.ref&&(u=t.ref),t)n.call(t,s)&&!l.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:a,type:e,key:p,ref:u,props:i,_owner:o.current}}},848:(e,t,r)=>{e.exports=r(20)},609:e=>{e.exports=window.React}},t={};function r(s){var a=t[s];if(void 0!==a)return a.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};(()=>{r.r(s),r.d(s,{GPQL:()=>F,GPQLControls:()=>y,GPQLControlsInheritedQuery:()=>q});const e=window.wp.blocks,t=window.wp.i18n,a=window.wp.primitives;var n=r(848);const o=(0,n.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(a.Path,{d:"M16 10.5v3h3v-3h-3zm-5 3h3v-3h-3v3zM7 9l-3 3 3 3 1-1-2-2 2-2-1-1z"})}),l=(0,n.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,n.jsx)(a.Path,{d:"M5 13.5h3v-3H5v3zm5 0h3v-3h-3v3zM17 9l-1 1 2 2-2 2 1 1 3-3-3-3z"})});var i=r(609);const p=window.wp.components,u=function(e){const r="string"==typeof e?20:24,s=(0,t.sprintf)("-$%dpx",r/4);return(0,i.createElement)(p.__experimentalZStack,{offset:15,isLayered:!0},(0,i.createElement)((()=>(0,i.createElement)(p.Icon,{icon:e})),null),(0,i.createElement)("div",{style:{color:"var(--wp-components-color-accent,var(--wp-admin-theme-color,#3858e9))",marginTop:s,marginRight:s}},(0,i.createElement)((()=>(0,i.createElement)(p.Icon,{icon:"nametag",size:12})),null)))};(0,e.registerBlockVariation)("core/query-pagination-previous",{category:"gatherpress",keywords:[(0,t.__)("Page numbers","default"),(0,t.__)("Pagination","default")],icon:u(o),isActive:["className"],attributes:{className:"gatherpress-query-pagination-previous",label:(0,t.__)("Previous Events","gatherpress")},name:"gatherpress-query-pagination-previous",title:(0,t.__)("Previous Events","gatherpress"),description:(0,t.__)("Displays the previous events link.","gatherpress")}),(0,e.registerBlockVariation)("core/query-pagination-next",{category:"gatherpress",keywords:[(0,t.__)("Page numbers","default"),(0,t.__)("Pagination","default")],icon:u(l),isActive:["className"],attributes:{className:"gatherpress-query-pagination-next",label:(0,t.__)("Next Events","gatherpress")},name:"gatherpress-query-pagination-next",title:(0,t.__)("Next Events","gatherpress"),description:(0,t.__)("Displays the next events link.","gatherpress")});const c=window.wp.hooks,g=window.wp.blockEditor,h=window.wp.element,{Fill:m,Slot:_}=(0,p.createSlotFill)("GPQLControls"),d=({children:e})=>(0,i.createElement)(m,null,e);d.Slot=({fillProps:e})=>(0,i.createElement)(_,{fillProps:e},(e=>e.length?e:null));const y=d,{Fill:v,Slot:E}=(0,p.createSlotFill)("GPQLControlsInheritedQuery"),f=({children:e})=>(0,i.createElement)(v,null,e);f.Slot=E;const q=f,b=({attributes:e,setAttributes:r})=>{const{query:{perPage:s,offset:a=0}={}}=e;return(0,i.createElement)(p.RangeControl,{label:(0,t.__)("Events Per Page","gatherpress"),min:1,max:50,onChange:t=>{r({query:{...e.query,perPage:t,offset:a}})},value:s})},w=window.wp.data,P=({attributes:e,setAttributes:r})=>{const{query:{exclude_current:s}={}}=e,a=(0,w.useSelect)((e=>e("core/editor").getCurrentPost()),[]);return a?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(p.ToggleControl,{label:(0,t.__)("Exclude Current Event","gatherpress"),checked:!!s,onChange:t=>{r({query:{...e.query,exclude_current:t?a.id:0}})}})):(0,i.createElement)("div",null,(0,t.__)("Loading…","gatherpress"))},x=({attributes:e,setAttributes:r})=>{const{query:{gatherpress_events_query:s="upcoming"}={}}=e;return(0,w.useSelect)((e=>e("core/editor").getCurrentPost()),[])?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(p.ToggleControl,{label:(0,t.__)("Upcoming or past events.","gatherpress"),help:(0,t.sprintf)(/* translators: %s: 'upcoming' or 'past' */ /* translators: %s: 'upcoming' or 'past' */
(0,t._x)("Currently shows %s events.","'upcoming' or 'past'","gatherpress"),s),checked:"upcoming"===s,onChange:t=>{r({query:{...e.query,gatherpress_events_query:t?"upcoming":"past"}})}})):(0,i.createElement)("div",null,(0,t.__)("Loading…","gatherpress"))},k=({attributes:e,setAttributes:r})=>{const{query:{offset:s=0}={}}=e;return(0,i.createElement)(p.RangeControl,{label:(0,t.__)("Event Offset","gatherpress"),min:0,max:50,value:s,onChange:t=>{r({query:{...e.query,offset:t}})}})},C=({attributes:e,setAttributes:r})=>{const{query:{order:s,orderBy:a}={}}=e,n="asc"===s?(0,t.__)("Ascending Order","gatherpress"):(0,t.__)("Descending Order","gatherpress");return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(p.SelectControl,{label:(0,t.__)("Order Events By","gatherpress"),value:a,help:"meta_value"===a||"meta_value_num"===a?(0,t.__)("Meta Value and Meta Value Num require that Meta Key is set in the Meta Query section.","gatherpress"):"",options:[{label:(0,t.__)("Event Date","gatherpress"),value:"datetime"},{label:(0,t.__)("Last Modified Date","gatherpress"),value:"modified"},{label:(0,t.__)("Title","gatherpress"),value:"title"},{label:(0,t.__)("Random","gatherpress"),value:"rand"},{label:(0,t.__)("Post ID","gatherpress"),value:"id"}],onChange:t=>{r({query:{...e.query,orderBy:t}})}}),(0,i.createElement)(p.ToggleControl,{label:n,checked:"asc"===s,onChange:()=>{r({query:{...e.query,order:"asc"===s?"desc":"asc"}})}}))},S=({attributes:e,setAttributes:r})=>{const{query:{include_unfinished:s}={}}=e;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(p.ToggleControl,{label:(0,t.__)("Include unfinished Events","gatherpress"),help:(0,t.sprintf)(/* translators: %s: 'upcoming' or 'past' */ /* translators: %s: 'upcoming' or 'past' */
(0,t._x)("%s events that have started but are not yet finished.","'Shows' or 'Hides'","gatherpress"),s?(0,t.__)("Shows","gatherpress"):(0,t.__)("Hides","gatherpress")),checked:s,onChange:t=>{r({query:{...e.query,include_unfinished:t?1:0}})}}))},B=e=>{const{attributes:{namespace:t}}=e;return t&&t===F},T=e=>{const{postType:t}=e.attributes.query;(0,h.useEffect)((()=>{if("gatherpress_event"===t){const t={...e.attributes,namespace:F,query:{...e.attributes.query,gatherpress_events_query:"upcoming",include_unfinished:1,order:"asc",orderBy:"datetime",inherit:!1}};e.setAttributes(t)}}),[t])};(0,c.addFilter)("editor.BlockEdit","core/query",(e=>r=>{if(!B(r)&&"core/query"!==r.name)return(0,i.createElement)(e,{...r});if(!B(r))return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(T,{...r}),(0,i.createElement)(e,{...r}),";");const s=function(e=null){return"gatherpress_event"===(e||(0,w.select)("core/editor").getCurrentPostType())}(),{attributes:a}=r;return!1===a.query.inherit?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(e,{...r}),(0,i.createElement)(g.InspectorControls,null,(0,i.createElement)(p.PanelBody,{title:(0,t.__)("Event Query Settings","gatherpress")},(0,i.createElement)(x,{...r}),(0,i.createElement)(S,{...r}),s&&(0,i.createElement)(P,{...r}),(0,i.createElement)(b,{...r}),(0,i.createElement)(k,{...r}),(0,i.createElement)(C,{...r}),(0,i.createElement)(y.Slot,{fillProps:{...r}})))):(0,i.createElement)(i.Fragment,null,(0,i.createElement)(e,{...r}),(0,i.createElement)(g.InspectorControls,null,(0,i.createElement)(p.PanelBody,{title:(0,t.__)("GatherPress Query Settings","gatherpress")},(0,i.createElement)(C,{...r}),(0,i.createElement)(q.Slot,{fillProps:{...r}}))))}));const D={name:"core/group",attributes:{className:"gp-venue-v3",layout:{type:"flex",orientation:"nonsense"}},innerBlocks:[["core/pattern",{slug:"gatherpress/venue-details"}]]},O=[["core/paragraph",{placeholder:(0,t.__)("Add text or blocks that will display when a query returns no events.","gatherpress")}]],N=["core/query-no-results",{metadata:{name:(0,t.__)("No events","gatherpress")}},O],A=["core/query-pagination",{},[["core/query-pagination-previous",{label:(0,t.__)("Previous Events","gatherpress"),className:"gatherpress-query-pagination-previous"}],["core/query-pagination-numbers"],["core/query-pagination-next",{label:(0,t.__)("Next Events","gatherpress"),className:"gatherpress-query-pagination-next"}]]],F="gatherpress-query-loop",M={namespace:F,query:{perPage:3,pages:0,offset:0,postType:"gatherpress_event",gatherpress_events_query:"upcoming",include_unfinished:1,order:"asc",orderBy:"datetime",inherit:!1}},V={category:"gatherpress",keywords:[(0,t.__)("Events","gatherpress"),(0,t.__)("Dates","gatherpress")],icon:u("list-view"),isActive:["namespace","query.postType"],attributes:{...M},allowedControls:["inherit","taxQuery"],scope:["block"]};(0,e.registerBlockVariation)("core/query",{...V,name:F,title:(0,t.__)("Event Query","gatherpress"),description:(0,t.__)("Create event queries","gatherpress"),scope:["inserter","transform"],example:{attributes:{...M},innerBlocks:[{name:"core/post-template",attributes:{},innerBlocks:[{name:"gatherpress/event-date"},{name:"core/post-title"},{...D}]}]}}),(0,e.registerBlockVariation)("core/query",{...V,name:"gatherpress-query-loop-map-date",title:(0,t.__)("Map & Event-Date","gatherpress"),description:(0,t.__)("Create gatherpress queries with Map & Date","gatherpress"),innerBlocks:[["core/post-template",{metadata:{name:(0,t.__)("Events Template","gatherpress")}},[["gatherpress/venue"],["gatherpress/event-date"]]],A,N]}),(0,e.registerBlockVariation)("core/query",{...V,name:"gatherpress-query-loop-date-title",title:(0,t.__)("Event-Date, Title & Venue details","gatherpress"),description:(0,t.__)("Create gatherpress queries with Event-Date & Title","gatherpress"),innerBlocks:[["core/post-template",{metadata:{name:(0,t.__)("Events Template","gatherpress")}},[{name:"gatherpress/event-date"},{name:"core/post-title"},{...D}]],A,N]}),(0,e.registerBlockVariation)("core/query",{...V,name:"gatherpress-query-loop-date-address",title:(0,t.__)("Event-Date & Venue Details","gatherpress"),description:(0,t.__)("Create gatherpress queries with Event-Date & Venue Details","gatherpress"),innerBlocks:[["core/post-template",{metadata:{name:(0,t.__)("Events Template","gatherpress")}},[{name:"gatherpress/event-date"},{...D}]],A,N]})})(),gpql=s})();